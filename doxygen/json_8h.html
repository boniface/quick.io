<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>QuickIO: lib/quick-event/src/json.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QuickIO
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_b261912c97c901759a7740fd897ed997.html">quick-event</a></li><li class="navelem"><a class="el" href="dir_95ddc183e27dff4f6e8bfed7d062aafa.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">json.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>qJSON is a minimal, in-place, zero-allocation JSON packer and unpacker.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="qev_8h_source.html">qev.h</a>&quot;</code><br/>
</div>
<p><a href="json_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a94dd5d9150518a93060dc1b394027ace"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a> { <br/>
&#160;&#160;<a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027acea6ef543c6549187cfb01c22400dda020f">QEV_JSON_OK</a>, 
<a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027aceac4ad3a83fcdf659d8ed98c4a8d6d3a1a">QEV_JSON_SPECMEM</a>, 
<a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027aceaa40ee505f48637ae7ed50ebbc15fb171">QEV_JSON_INSPEC</a>, 
<a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027acea314423df1d94d9d022da72f4193b3bee">QEV_JSON_INVAL</a>, 
<br/>
&#160;&#160;<a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027acea7c83e5aba41682ca662e71d0d5765017">QEV_JSON_MISMATCH</a>
<br/>
 }</td></tr>
<tr class="memdesc:a94dd5d9150518a93060dc1b394027ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of parts the spec may contain (objects, arrays, values).  <a href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">More...</a><br/></td></tr>
<tr class="separator:a94dd5d9150518a93060dc1b394027ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5d5d54f36570bed6bc201f2a81e78aac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d5d54f36570bed6bc201f2a81e78aac"></a>
enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a5d5d54f36570bed6bc201f2a81e78aac">qev_json_unpack</a> (gchar *json, guint *parsed, const gchar *spec,...)</td></tr>
<tr class="memdesc:a5d5d54f36570bed6bc201f2a81e78aac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable arguments form of <a class="el" href="json_8h.html#a1111dba0f1c4101d8907b9c59401f50c" title="Unpack the given JSON object into the given variables. ">qev_json_vunpack()</a>. <br/></td></tr>
<tr class="separator:a5d5d54f36570bed6bc201f2a81e78aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1111dba0f1c4101d8907b9c59401f50c"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a1111dba0f1c4101d8907b9c59401f50c">qev_json_vunpack</a> (gchar *json, guint *parsed, const gchar *spec, va_list args)</td></tr>
<tr class="memdesc:a1111dba0f1c4101d8907b9c59401f50c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpack the given JSON object into the given variables.  <a href="#a1111dba0f1c4101d8907b9c59401f50c">More...</a><br/></td></tr>
<tr class="separator:a1111dba0f1c4101d8907b9c59401f50c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6404e4d553f389e6d2f9f512e46d3262"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6404e4d553f389e6d2f9f512e46d3262"></a>
enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#a6404e4d553f389e6d2f9f512e46d3262">qev_json_pack</a> (GString *buff, const gchar *spec,...)</td></tr>
<tr class="memdesc:a6404e4d553f389e6d2f9f512e46d3262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable arguments form of <a class="el" href="json_8h.html#afbd935a0197ad900ca0a2e693099d12d" title="Packs the given values into a JSON object. ">qev_json_vpack()</a>. <br/></td></tr>
<tr class="separator:a6404e4d553f389e6d2f9f512e46d3262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd935a0197ad900ca0a2e693099d12d"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="json_8h.html#afbd935a0197ad900ca0a2e693099d12d">qev_json_vpack</a> (GString *buff, const gchar *spec, va_list args)</td></tr>
<tr class="memdesc:afbd935a0197ad900ca0a2e693099d12d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs the given values into a JSON object.  <a href="#afbd935a0197ad900ca0a2e693099d12d">More...</a><br/></td></tr>
<tr class="separator:afbd935a0197ad900ca0a2e693099d12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>qJSON is a minimal, in-place, zero-allocation JSON packer and unpacker. </p>
<p>The following specs are supported:</p>
<ul>
<li>b - boolean value (gboolean)</li>
<li>f - double value (gdouble)</li>
<li>d - integer value (gint64)</li>
<li>s - utf-8 encoded string value (gchar*)</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>write some examples for json usage</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andrew Stone <a href="#" onclick="location.href='mai'+'lto:'+'and'+'re'+'w@c'+'lo'+'var'+'.c'+'om'; return false;">andre<span style="display: none;">.nosp@m.</span>w@cl<span style="display: none;">.nosp@m.</span>ovar.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2012-2013 Andrew Stone </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a94dd5d9150518a93060dc1b394027ace"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum number of parts the spec may contain (objects, arrays, values). </p>
<p>Possible return codes of any operation </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a94dd5d9150518a93060dc1b394027acea6ef543c6549187cfb01c22400dda020f"></a>QEV_JSON_OK</em>&#160;</td><td class="fielddoc">
<p>Everything went as expected. </p>
<p>All values are good to use. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a94dd5d9150518a93060dc1b394027aceac4ad3a83fcdf659d8ed98c4a8d6d3a1a"></a>QEV_JSON_SPECMEM</em>&#160;</td><td class="fielddoc">
<p>If the spec has too many parts. </p>
<p>In reality, if you ever encounter this, then you should probably use a different parser that has more complete memory management. If you're sure you want to use this, increase JSON_MAX_PARTS. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a94dd5d9150518a93060dc1b394027aceaa40ee505f48637ae7ed50ebbc15fb171"></a>QEV_JSON_INSPEC</em>&#160;</td><td class="fielddoc">
<p>The spec was invalid. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a94dd5d9150518a93060dc1b394027acea314423df1d94d9d022da72f4193b3bee"></a>QEV_JSON_INVAL</em>&#160;</td><td class="fielddoc">
<p>The JSON was improperly formatted. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a94dd5d9150518a93060dc1b394027acea7c83e5aba41682ca662e71d0d5765017"></a>QEV_JSON_MISMATCH</em>&#160;</td><td class="fielddoc">
<p>The JSON was valid but didn't match the spec or didn't completely fill all requested values. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afbd935a0197ad900ca0a2e693099d12d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a> qev_json_vpack </td>
          <td>(</td>
          <td class="paramtype">GString *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packs the given values into a JSON object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>Where the packed JSON should be placed. The JSON is only appended to the string, so if you only want JSON in the string, be sure the string is empty before passing it in. </td></tr>
    <tr><td class="paramname">spec</td><td>The json-ish spec used to pack into JSON. </td></tr>
    <tr><td class="paramname">args</td><td>The values to pack.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of packing. </dd></dl>

</div>
</div>
<a class="anchor" id="a1111dba0f1c4101d8907b9c59401f50c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="json_8h.html#a94dd5d9150518a93060dc1b394027ace">qev_json_status</a> qev_json_vunpack </td>
          <td>(</td>
          <td class="paramtype">gchar *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint *&#160;</td>
          <td class="paramname"><em>parsed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unpack the given JSON object into the given variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">json</td><td>The JSON to unpack. This will be modified <em>in place</em> and unpacked into the values, so once this becomes invalid, all gchar* values passed in also become invalid. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parsed</td><td>The number of characters parsed. When json_ok, this is the number of JSON characters parsed (it's possible that this is less than the length of the JSON string when all values are found before parsing finishes). When json_inspec, this is the number of spec characters parsed. Practically speaking, on error, the character at this offset is the beginning of the parse error. [<em>allow-null</em>] </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">spec</td><td>The json-ish spec used to unpack the JSON into the given variables. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Where the found values should be placed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Unpacking status. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 22 2014 11:23:00 for QuickIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
